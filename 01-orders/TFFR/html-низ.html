<!-- БАННЕРЫ -->

<div class="banners">

	<a href="https://t.me/neterolevye" title="ПОДКАСТ: НЕТЕРОЛЕВЫЕ"><img
			src="https://forumupload.ru/uploads/0014/80/a5/2/655059.png"></a>


	<a href="https://imagiart.ru/" target="_blank"> <img src="https://i.imgur.com/h3ba1GC.gif"
			title="photoshop: Renaissance" border="0" alt="photoshop: Renaissance"></a>

	<a href="http://artishock.rusff.me/" target="_blank"><img src="https://s2.uploads.ru/nzVxs.gif" title="ARTISHOCK"
			border="0" width="88" height="31"></a>

	<a href="https://kakbicross.ru/" target="_blank"><img src="https://forumupload.ru/uploads/001b/8a/62/4/395613.png"
			title="как б[ы] кросс" border="0" width="88" height="31"></a>

	<a href="http://catchyourdream.rusff.me" target="_blank"><img src="https://i.imgur.com/QDhZ9vz.gif"
			title="dream catcher"></a>


</div>

<!-- *************************************************************** -->

<!-- Маска профиля -->
<script src="https://forumstatic.ru/files/001c/16/c4/41103.js?v=9"></script>


<script>
hvScriptSet.addMask({
    defaultAvatar: ['https://forumstatic.ru/files/001c/16/c4/92352.png'],
    guestAccess: ['Бесконченые хроники'],
    forumAccessExtended: {
        'Настоящее': ['Игроки'],
        'Прошлое': ['Игроки'],
        'Недостижимая даль': [ 'Игроки'],
        'Бесконченые хроники': ['Игроки'],
        'Беседка под тисом': ['Новоприбывшие', 'Игроки'],
        'Записки между строк': ['Игроки']
    },
    changeList: {
        'pafld1': {
            title: 'ЛЗ',
            description: 'Личное звание',
            tag: 'lzv',
            class: 'pa-fld1',
            defaultCode: '<div class="lz-container"><div class="lz_age"><a>Возраст,мировоззрение</a></div><div class="lz_desc">Описание персонажа маски</div></div>',
            type: 'html'
        }
    },
    userFields: ['pa-author', 'pa-title', 'pa-avatar', 'pa-fld1', 'pa-posts', 'pa-respect', 'pa-online']
});
</script>


<!-- Кнопка новые сообщения -->
<script type="text/javascript">$('#pun-ulinks ul').prepend('<li class="item1"><a href="/search.php?action=show_new">Новые сообщения</a></li>');</script>



<!-- Второй тег ([img] [/img])-->
<script>var oldIMG = "<td id=\"button-image\" title=\"Вставить картинку\"><img onclick=\"bbcode('[img]','[/img]')\" src=\"/i/blank.gif\"/><b><p style=\"position:absolute;height14px;margin:-15px 0 0 22px;font-size:8px;\">2</p></b></td>"
	$("#button-image").after(oldIMG);</script>


<!-- *************************************************************** -->


<!-- Замена ссылок Панель навигации -->

<script>
	navlinks = new Array(
		"navindex", "Форум",   // Главная 
		"navuserlist", "Игроки",   // Юзеры
		"navprofile", "Профиль",   // Профиль
		"navregister", "Регистрация",   // рег
		"navadmin", "АМС"   // Администрирование
	)
	var s, i; for (i = 0; i < navlinks.length; i++) {
		s = navlinks[i + 1];
		$("#" + navlinks[i] + " a").html("<span>" + s + "</span>"); i++;
	}
</script>

<!-- *************************************************************** -->


<!-- Стрелки вверх-вниз @satsana-->

<div class="go-up" id="ToTop" title="Наверх"></div>
<div class="go-down" id="OnBottom" title="Вниз"></div>

<script type="text/javascript">
	$(function () {
		if ($(window).scrollTop() >= "100") $("#ToTop").fadeIn("slow")
		$(window).scroll(function () {
			if ($(window).scrollTop() <= "100") $("#ToTop").fadeOut("slow")
			else $("#ToTop").fadeIn("slow")
		});
		if ($(window).scrollTop() <= $(document).height() - "999") $("#OnBottom").fadeIn("slow")
		$(window).scroll(function () {
			if ($(window).scrollTop() >= $(document).height() - "1100") $("#OnBottom").fadeOut("slow")
			else $("#OnBottom").fadeIn("slow")
		});
		$("#ToTop").click(function () { $("html,body").animate({ scrollTop: 0 }, "slow") })
		$("#OnBottom").click(function () { $("html,body").animate({ scrollTop: $(document).height() }, "slow") })
	});
</script>


<!-- *************************************************************** -->

<!-- ДОП ШРИФТЫ -->
<script type="text/javascript">
	if ($('#pun-viewtopic,#pun-post,#pun-edit,#pun-poll').length) {
		var ft; var i; var ft_f; var j = "";
		ft = document.getElementById("font-area");
		var ft_f = new Array();
		ft_f.push('Micra');
		ft_f.push('Fea');
		ft_f.push('Carolina');
		ft_f.push('Compact');
		ft_f.push('Tagirctt');
		ft_f.push('Lobster');
		ft_f.push('Bebas Neue');
		ft_f.push('Rochester');
		ft_f.push('FatFacel');
		ft_f.push('Yeseva One');
		ft_f.push('Bangers');
		ft_f.push('Limelight');
		ft_f.push('Great Vibes');
		ft_f.push('Cheque');
		ft_f.push('Sansterdam');
		ft_f.push('Alegreya');
		ft_f.push('Mookmania');
		ft_f.push('Ostrovsky');
		for (i in ft_f) {
			j = "<div><span style='font-family:" + ft_f[i] + ";'>" + ft_f[i] + "</span><img src='/i/blank.gif' onclick=\"bbcode('[";
			j += "font=" + ft_f[i];
			j += "]','[/font]')\" /></div>";
			ft.innerHTML += j;
		}
	}
</script>

<!-- *************************************************************** -->

<!-- Доп BB-теги -->

<div id=Hide>
	<div class="container" id="area_AutoBorder" style="display:none" onclick="changeVisibility('area_AutoBorder')">
		<p>Рамка стандартная<span>[img=imgbr1],[/img]</span></p>
		<p>Отступы на весь пост<span>[indentation],</span></p>
	</div>
</div>

<style>
	.punbb #form-buttons #AutoBorder_menu {
		background-position: 50% 50% !important;
	}


	#area_AutoBorder hr {
		margin-bottom: 0.5em !important;
		display: block;
		padding: 0;
		width: 100px;
		height: 1px;
		border: 1px;
		border-top: 1px solid #8a7b6169;
	}

	#area_AutoBorder span {
		display: none;
	}

	#area_AutoBorder p {
		cursor: pointer;
		transition: all .3s
	}
	
	#area_AutoBorder p:hover {
		  color: var(--font-accent-color);
	}



	#area_AutoBorder {
		/* margin-right: -50px; */
		padding: 10px !important;
		position: absolute;
		right: 1%;
		top: 43px;
		width: auto;
		outline: none;
		border: solid 1px var(--pun-color-border);
		background-color: var(--under-forum);
	}

	/*рамка для обрамления картинок через bbcode*/
	.post-content img[alt="imgbr1"] {
		margin: 3px 3px !important;
		border: solid 4px var(--pun-color) !important;
		outline: solid 1px var(--head-border) !important;
	}
</style>

<script type="text/javascript">
	var strs = '<img src="/i/blank.gif" title="Дополнительные теги" onclick="changeVisibility(\'area_AutoBorder\')"/>';
	if (document.URL.indexOf("/viewtopic.php?id") != -1 || document.URL.indexOf("/post.php?fid") != -1 || document.URL.indexOf("/post.php?tid") != -1 || document.URL.indexOf("/edit.php?id") != -1) $("#form-buttons #button-keyboard").after("<td id=AutoBorder_menu>" + strs + "</td>")
	$("#keyboard-area").after($("div.#Hide").html())
	$('#area_AutoBorder p').click(function () {
		var L = $(this).find("span").html();
		var P = L.split(',');
		bbcode(P[0], P[1])
		return false;
	}); 
</script>


<!-- Inlays -->

<script src="https://forumstatic.ru/files/001c/16/c4/96732.js"></script>

<!-- *************************************************************** -->


<!-- Упрощение списка активных -->

<script type="text/javascript">
	if ($(".punbb").attr("id") == "pun-index") {
		function getNumEnding(Num, EndArr) {
			var End, i; Num = Num % 100; if (Num >= 11 && Num <= 19) End = EndArr[2];
			else {
				i = Num % 10; switch (i) {
					case (1): End = EndArr[0]; break; case (2): ; case (3): ;
					case (4): End = EndArr[1]; break; default: End = EndArr[2];
				};
			}; return End;
		};
		var GuestWrdArr = new Array("душа", "души", "душ");
		var UserWrdArr = new Array("душа", "души", "душ");

		$("#pun-stats .item5 div").each(function () {
			var Cnt = $(this).find("span").html(); var Lnk = $(this).find("a:first").clone(); var L = $(this).html();
			var Wrd = ""; var Wrd2 = ""; var Wrd3 = "";

			if (L.indexOf("Активны") != -1) {  //Строка Активных;
				var GuestNum = parseFloat($(this).find("strong").eq(0).html());
				var UserNum = parseFloat($(this).find("strong").eq(1).html());
				Wrd = getNumEnding(GuestNum, GuestWrdArr); Wrd2 = getNumEnding(UserNum, UserWrdArr);
				L = '<span class=e1></span> <span class=e2><span class="e2-1">' + GuestNum + '</span>';
				L += '<span class="e2-2"> ' + Wrd + '</span></span> <span class="e3"><span class="e3-1">' + UserNum + '</span>';
				L += '<span class="e3-2"> ' + Wrd2 + '</span></span>'; if (UserNum > 0) { L += ":" };
				L += ' <span class=e4>' + Cnt + '</span>'; $(this).html(L); $(this).find(".e1").prepend(Lnk)
			};

			if (L.indexOf("Посетили за сутки") != -1) {  //Строка Посетителей за сутки;
				var UserNum = parseFloat($(this).find("strong").eq(0).html());
				Wrd3 = getNumEnding(UserNum, UserWrdArr);
				L = '<span class=e1></span> <span class="e3"><span class="e3-1">' + UserNum + '</span>';
				L += '<span class="e3-2"> ' + Wrd3 + '</span></span>'; if (UserNum > 0) { L += ":" };
				L += ' <span class=e4>' + Cnt + '</span>'; $(this).html(L); $(this).find(".e1").prepend(Lnk);
				if (UserNum.toString().substring(UserNum.length - 1, UserNum.length) == "1" && UserNum != 11) {
					var e1 = $(this).find(".e1 a"); var a = e1.text(); e1.text(a.replace('Посетили', 'Посетил'))
				};
			};
		});

		$("#pun-stats .item6 div").each(function () {
			var UserNum = parseFloat($(this).find("strong").eq(0).html()); var Cnt = $(this).find("span").html();
			UserWrdArr = new Array("пользователя", "пользователей", "пользователей");
			var Wrd = getNumEnding(UserNum, UserWrdArr); var St = $(this).html().replace(/^([^\[\]]*?)\!([\s\S]*)$/igm, "$1");
			L = '<span class=e1>' + St + '</span> <span class="e3"><span class="e3-1">' + UserNum + '</span>';
			L += '<span class="e3-2"> ' + Wrd + '</span></span>: <span class=e4>' + Cnt + '</span>'; $(this).html(L);
		});
	};
</script>

<!-- *************************************************************** -->

<!-- Читатель -->

<script type="text/javascript">
	ChitatNik = "Seer";
	ChitatPas = "897SeeYourMom";
	var L = "<div id=\"CH_loginDiv\" style=\"display:none;\">\
<form id=\"form_login\" name=\"login\" method=\"post\" action=\"login.php?action=in\" onsubmit=\"return check_form()\">\
<fieldset>\
<input type=\"hidden\" name=\"form_sent\" value=\"1\"/>\
<input type=\"text\" id=\"fld1\" name=\"req_username\" size=\"21\" maxlength=\"25\"/>\
<input type=\"text\" id=\"fld2\" name=\"req_password\" size=\"7\" maxlength=\"16\"/>\
<input type=\"submit\" class=\"button\" name=\"login\"/>\
</fieldset>\
</form>\
</div>\
<li id=\"navchitat\"><a href=\"#\" onclick=\"ChitatIn();return false\"><span>Чтец 18+</span></a></li>";
	if ($("#navlogin").html() != null) {
		$("#navlogin").after(L) //navlogin
		$("#CH_loginDiv #fld1").val(ChitatNik)
		$("#CH_loginDiv #fld2").val(ChitatPas)
		function ChitatIn() { $("#CH_loginDiv input[type='submit']").click(); }
	}
</script>

<script type="text/javascript">
	if (UserLogin == 'Seer' || UserLogin == 'Ник2' && document.URL.indexOf("profile.php") != -1) {
		$("#profile .container").replaceWith('<img src="https://i.vgy.me/ogL6Av.png"></img>');
	}
</script>


<!-- *************************************************************** -->


<!--Короткое и среднее тире на длинное + ajax-->

<script type="text/javascript">
	function replaceHyphensWithDashes(selector) {
		$(selector).html(function () {
			return this.innerHTML.replace(/(\s|&nbsp;)?-(\s|&nbsp;)/g, '$1&mdash;$2');
		});
	}

	replaceHyphensWithDashes('.post-content p');

	$(document).on('pun_mainReady pun_post pun_edit pun_preview', function () {
		replaceHyphensWithDashes('.post-content p');
	});
</script>


<!-- Cвернуть спойлер -->

<script type="text/javascript">
	function clickSP(i) { setTimeout("$('#spoiler" + i + "').click()", 100); }
	$('.quote-box.spoiler-box > div').each(function (i) {
		$(this).attr('id', 'spoiler' + i).append('<a name="220_' + i + '" style="position:absolute;margin-top:-200px;"></a>');
		$(this).next('blockquote').append('<a href="#220_' + i + '" onclick="clickSP(' + i + ')" style="float:right;font-size: 11px;font-style: italic;opacity: 0.7;">Свернуть спойлер</a>');
	});
</script>

<!-- Тег абзаца + ajax-->
<script type="text/javascript">
    //IIFE
	(function () {
		var b = '[indent]';
		var indent = '<span style="display: inline-block; margin-left: 2.2em;"></span>';

		$("#button-strike").after('<td id="button-indent" title="Отступы"><img src="/i/blank.gif" onclick="smile(\'' + b + '\')"></td>');

		function applyIndent() {
			$('.post-content p').each(function () {
				var $this = $(this);
				if ($this.text().includes(b)) {
					$this.html($this.html().replace(/\[indent\]/gm, indent));
				}
			});
		}

		$(document).on('pun_mainReady pun_post pun_edit pun_preview', applyIndent);
		applyIndent();
	}());
</script>


<!-- Восстановление последнего поста при утере -->

<script type="text/javascript">

	$(document).ready(function () {
		$('#addition-area').append(
			$('<div>Восстановить последний пост</div>').click(function () {
				$('#main-reply').val(localStorage.getItem('ReservePost'));
			})
		);

		// ajax post saving
		$('input[name=submit].ajax-post').on('click', function () {
			localStorage.setItem('ReservePost', $('#main-reply').val());
		});
	});
</script>

<!-- Кликабельность ника для гостей, Alex, Teswa -->
    
<script>$(".post[data-group-id=3]").find(".pa-author").html(function(){return this.innerHTML.replace(/(<.+>)(.+)$/,'$1<a href="javascript:to(\'$2\')">$2</a>')});</script>

<script>$('.pa-author a').each((i,a) => $(a).attr('href', "javascript:to('" + a.innerHTML.replace("'", "\\'") + "')"));</script>


<!-- Пагинатор -->

<script>
    $(document).ready(function() {
    if ($('#pun-viewtopic, #pun-viewforum, #messages, #pun-respect, #pun-positive, #userlist').length &&
        $('.pagelink a').length) {
        initPaginator();


        $('.pagelink').on('mouseenter', function() {
            $(this).find('#pagenav').show();
        }).on('mouseleave', function() {
            $(this).find('#pagenav').hide();
        });

        $('#pagenav').on('mousemove touchmove', function(e) {
            var offset = $(this).offset();
            var currentY = e.originalEvent.touches ? e.originalEvent.touches[0].pageY : e.pageY;
            var y = parseInt(currentY - offset.top);
            togglePageVisibility(y);
        });
    }

    function initPaginator() {
        var maxPages = getMaxPages();
        if (!maxPages || maxPages <= 4) return; // hide if fewer than 4 pages

        var paginatorHTML = createPaginatorHTML(maxPages);
        var bgColor = $('.crumbs:first').css('background-color');
        var borderColor = $('.crumbs:first').css('border-bottom-color');

        $('.pagelink').append(paginatorHTML);
        $('#pagenav').css({
            'border-color': borderColor,
            'background-color': bgColor
        });
    }

    function getMaxPages() {
        var lastPage = parseInt($('.pagelink a:not(.next):last').html(), 10);
        var currentPage = parseInt($('.pagelink strong').html(), 10);
        return Math.max(lastPage, currentPage);
    }

    function createPaginatorHTML(maxPages) {
        var linkBase = $('.pagelink a:first').attr('href').replace(/&.+$/, '');
        var paginator = '<div id="pagenav" style="display:none;position:relative;overflow:auto;"><div id="paginator">';

        for (var p = 1; p <= maxPages; p++) {
            var cssClass = p.toString().length >= 3 ? 'second' : 'first';
            paginator += '<a class="' + cssClass + '" href="' + linkBase + '&p=' + p + '">' + p + '</a>';
        }

        paginator += '</div></div>';
        return paginator;
    }

    function togglePageVisibility(cursorY) {
        if (cursorY > 90) {
            $('.second').fadeIn(200);
        } else {
            $('.second').fadeOut(200);
        }
    }
});
</script>

<!-- Копирование кода со сменой стиля блока + ajax © ForumD.ru, Gerda -->

<script>
	var codeText = 'Скопировать код'; // текст до клика
	var codeCopied = 'Скопировано!'; // текст после клика
</script>
<script type="text/javascript">
	(function () {
		function initializeCopyCode() {
			$('.code-box').each(function () {
				var $codeBox = $(this);
				if (!$codeBox.hasClass('copy-initialized')) {
					$codeBox.find('.legend').html('<a class="copy-code" href="javascript:void(0);">' + codeText + '</a>');
					$codeBox.find('.copy-code').on('click', function () {
						$codeBox.find('.legend').html('<a class="copy-code" href="javascript:void(0);">' + codeCopied + '</a>');
						$codeBox.addClass('copied');
						var textarea = document.createElement('textarea');
						textarea.value = $codeBox.find('.scrollbox pre').text();
						document.body.appendChild(textarea);
						textarea.select();
						try {
							document.execCommand('copy');
							console.log('Код скопирован успешно:', textarea.value);
						} catch (err) {
							console.error('Ошибка копирования кода:', err);
						} finally {
							document.body.removeChild(textarea);
						}
					});
					$codeBox.addClass('copy-initialized'); // flag
				}
			});
		}

		// ajax
		$(document).on('pun_mainReady pun_post pun_edit pun_preview', initializeCopyCode);

		// init call
		initializeCopyCode();
	})();
</script>

<!-- **************** -->