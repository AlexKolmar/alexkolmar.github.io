<!-- Замена двойных кавычек на парные угловые скобки («») в постах © Deff -->
<script type="text/javascript">
(function(){function rep(str, p1,offset, s){
  return '>'+p1.replace(/"([^ "][^"]+?)"/gm,'«$1»')+'<';}
$('.post-content p').each(function(){
  $(this).html(('</>'+$(this).html()+'</>').replace(/>([^<>]+)</gm, rep));
});}());
</script>

<!----------------------------- КОЛ-ВО ТЕМ И СООБЩЕНИЙ В СТОЛБИК --------------------------------------->
<script>document.querySelectorAll('.category tr').forEach((forum) => {
    //Тут можно поменять тексты перед цифрами тем и постов
    const classToName = {'tc2': 'thems:', 'tc3': 'sms:'};
    const topicsAndPosts = [];
    const forumH3 = forum.querySelector('h3');
    if (!forumH3) return;
    forum.querySelectorAll('.tc2, .tc3').forEach(el => {
        const content = el.innerText;
        if (Number.isNaN(+content)) return;
        const labelText = el.classList.contains('tc2') ? classToName.tc2 : classToName.tc3;
        const res = document.createElement('span');
        res.insertAdjacentHTML('afterbegin', `<b>${labelText}</b> ${content}`);
        res.classList.add(el.classList.contains('tc2') ? 'topics' : 'posts');
        el.remove();
        topicsAndPosts.push(res);
    });
    
    forumH3.insertAdjacentHTML('beforebegin', '<div class="forum-title"></div>');
    const leftContainer = forum.querySelector('.forum-title');
    const topicsAndPostsContainer = document.createElement('div');
    topicsAndPostsContainer.classList.add('topics-and-posts');
    topicsAndPostsContainer.append(...topicsAndPosts)
    leftContainer.append(forumH3, topicsAndPostsContainer);
});</script>

<!------------------------------------------------- НАВИГАЦИЯ ---------------------------------------------------->
<script>var Img_Word=1;   //0-Картинка;1-Cлово /Ставим картинку или Слово ?
   navlinks=new Array(

  "navindex","forum", // форум
  "navuserlist","users", // Участники
  "navsearch","search",  // Поиск
  "navprofile","profile", // Профиль
  "navpm","mess.",      // Сообщения
  "navadmin","admin",   // Администрирование
  "navregister","registr.", // Регистрация
  "navlogin","login",  // Войти
  "navlogout","exit" // Выход - !ПОСЛЕДНИЙ элемент без запятой

)

var s,i;for (i=0; i < navlinks.length; i++){s=navlinks[i+1];
   if(!Img_Word){s='<img class="navlinks" src="'+s+'" border="0" />'}
   $("#"+navlinks[i]+" a:first").html("<span>"+s+"</span>");i++;}
</script>

<!---------------------------------------- ВЕРНУТЬ "НОВЫЕ СООБЩЕНИЯ" ------------------------------------->
<script type="text/javascript">
function show_new() { if(GroupID == 3) return;
$('#pun-ulinks ul').prepend('<li class="item1"><a href="/search.php?action=show_new">Новые сообщения</a></li>');} 
show_new();
</script>

<!--------------------------------------------- КНОПКИ ВВЕРХ И ВНИЗ ------------------------------------------>
<div class="go-up" id="ToTop" style="display: block;"></div>
<div class="go-down" id="OnBottom" style="display: block;"></div>
<script type="text/javascript">
$(function(){
if ($(window).scrollTop()>="250") $("#ToTop").fadeIn("slow")
$(window).scroll(function(){
  if ($(window).scrollTop()<="250") $("#ToTop").fadeOut("slow")
  else $("#ToTop").fadeIn("slow")
});
if ($(window).scrollTop()<=$(document).height()-"999") $("#OnBottom").fadeIn("slow")
$(window).scroll(function(){
  if ($(window).scrollTop()>=$(document).height()-"999") $("#OnBottom").fadeOut("slow")
  else $("#OnBottom").fadeIn("slow")
});
$("#ToTop").click(function(){$("html,body").animate({scrollTop:0},"slow")})
$("#OnBottom").click(function(){$("html,body").animate({scrollTop:$(document).height()},"slow")})
});
</script>

<!------------------------------------------ СВОИ + И - В РЕПУТАЦИИ ------------------------------------------->
<style type="text/css">
.pa-respect a[href*="&v=1&cod"] { display: inline-flex; position: relative; bottom: 1px; }
.pa-respect a[href*="&v=1&cod"] img { visibility:hidden; height:8px; width:8px; }
.pa-respect a[href*="&v=1&cod"], .pa-respect a:hover[href*="&v=1&cod"]{
background:url() center 100% no-repeat  !important; display: none; /*+*/}
</style>

<!---------------------------------------- ЗАМЕНА СЛОВ В СТАТИСТИКЕ ---------------------------------------->
<script type="text/javascript">document.getElementById('pun-stats').getElementsByTagName('li')[3].childNodes[0].innerHTML = 'Приветствуем: ' </script>
<script type="text/javascript">document.getElementById('pun-stats').getElementsByTagName('li')[1].childNodes[0].innerHTML = 'Сообщений: ' </script>
<script type="text/javascript">document.getElementById('pun-stats').getElementsByTagName('li')[2].childNodes[0].innerHTML = 'Пользователей: ' </script>
<script type="text/javascript">document.getElementById('pun-stats').getElementsByTagName('li')
[0].childNodes[0].innerHTML = 'Тем: ' </script>

<!------------------------------------------- УНИВЕРСАЛЬНАЯ ЗАМЕНА ------------------------------------------>
<script>
function UniverСhange(selektor,changed,substitute){
$(selektor).each(function(){if ($(this).parent().html()!=null){if($(this).parent().html().indexOf(changed)!=-1){
$(this).parent().html($(this).parent().html().replace(changed,substitute));};};});}

UniverСhange("##pun-stats.section h2 span","Статистика форума","Statistics"); 

</script>

<!-------------------- УДАЛЯЕМ ЛИШНИЕ СТРОКИ ПОСЛЕ ЦИТАТЫ И КОДА © Alex_63 v.3 ----------------->
    <script type="text/javascript">
    $('.post-content').each(function() {
        var CNT = $(this).html();
        CNT = CNT.replace(/<p><br><\/p>/img,'');
        CNT = CNT.replace(/<p><br><br>(.*?)<\/p>/img,'<p>$1</p>');
        CNT = CNT.replace(/<p><br>(.*?)<\/p>/img,'<p>$1</p>');
        $(this).html(CNT);
    });
    </script>

<!------------------------------------------------- ЗАМЕНА ТИРЕ -------------------------------------------------->
<script type="text/javascript">
$('.post-content p').each(function(){
  function replacer(str){return str.replace(/-\s|–\s/gm,'— ');}
  var a = $(this).clone().wrap('<div></div>').parent().html();
  var b = a.replace(/>[^<>]+</gim,replacer);
  if(a!=b)$(this).replaceWith(b)
});
</script> 

<!--------------------------------------------------- НИК ГОСТЯ --------------------------------------------------->
<script>$(".post[data-group-id=3]").find(".pa-author").html(function(){return this.innerHTML.replace(/(<.+>)(.+)$/,'$1<a href="javascript:to(\'$2\')">$2</a>')});</script>

<!=================================================================
                                                      СКРИПТЫ ДЛЯ ФОРМА ОТВЕТА
==================================================================>

<!----------------------------------------- ОБТЕКАНИЕ ИЗОБРАЖЕНИЯ 2.4.4 ----------------------------------->
<script language="javascript">
$(function(){
$('td#button-link').before('<td id="floatbut"  style=\'background-image:url("https://icons.iconarchive.com/icons/famfamfam/silk/16/text-dropcaps-icon.png")\'></td>');
$('#floatbut, .vibor').click(function(){
$('div#float').toggle();});
  });
elm=document.getElementsByTagName("div")
for(x in elm) if(elm[x].className=="post-content") 
{
post = elm[x].innerHTML;
if(post.indexOf("[/float]") != -1) {
floats = /\[float=(.*?)\]([^\[]{1,11000})\[\/float\]/gi
elm[x].innerHTML = elm[x].innerHTML.replace(floats, "<span style='float: $1; margin: 15px; text-align: $1;'>$2</span>")
}}
</script>
<div id="float" style="display:none;width: auto;
    padding: 8px;
    position: absolute;
    margin-top: -34%;
    margin-left: 83%;
    color: var(--cl5);
    font-family: var(--3ft);
    font-size: 12px;
    box-shadow: rgba(0, 0, 0, 0.16) 0px 3px 6px, rgba(0, 0, 0, 0.23) 0px 3px 6px;
    background: rgb(238, 238, 238);
    border-radius: 0px;
    z-index: 20;
    border: none !important;">
<div><strong>Направление обтекания</strong></div><br>
<div align="center">
<img class="vibor" style="margin: 0px 5px;" src="https://forumstatic.ru/files/001c/0a/eb/92766.png" title="слева" onclick="bbcode('[float=left]', '[/float]')" />
<img class="vibor" style="margin: 0px 5px;" src="https://forumstatic.ru/files/001c/0a/eb/74071.png" title="справа" onclick="bbcode('[float=right]', '[/float]')" />
</div></div>

<!---------------------------------------------- ВСТАВИТЬ КАРТИНКУ -------------------------------------------->
<script>
var oldIMG="<td id=\"button-image2\" title=\"Вставить картинку\"><img onclick=\"bbcode('[img]','[/img]')\" src=\"/i/blank.gif\"/></td>"
$("#button-image").after(oldIMG);
</script>

<!------------------------------------------ ВЫРАВНИВАНИЕ ПО ШИРИНЕ --------------------------------------->
<script type="text/javascript"> 
$(document).ready(function(){ 
$("#post #button-center").after('<td id=button-justify align=center valign=center><img onclick="bbcode(\'[align=justify]\',\'[/align]\')" src="/i/blank.gif"/></td>');}); 
</script>

<!------------------------------------------- КНОПКА АБЗАЦА - [indent] ----------------------------------------->
<style>#button-indent {background: url(https://s7.uploads.ru/t/mnkgq.png) no-repeat center 6px!important;}</style>
<script type="text/javascript">(function()
{var b = '[indent]'; 
$("#button-strike").after('<td id="button-indent" title="Отступы"><img src="/i/blank.gif"  onclick="insert(\''+b+'\')"></td>');
var indent = '<span style="display: inline-block; margin: 1em 2.1em;"></span>'; 
$('.post-content p:contains("'+b+'")').each(function(){ $(this).html( $(this).html().replace(/\[indent\]/gm,indent));});}());
</script>

<!------------------------------- ПЕРЕКЛЮЧЕНИЕ РАСКЛАДКИ ВЫДЕЛЕННОГО ТЕКСТА ---------------------->
<style>#button-transL{background-image:url(http://uploads.ru/i/X/j/Z/XjZW7.png)}</style>
<script type="text/javascript">S='<img src="http://forum.mybb.ru/i/blank.gif" title="Lat- Русс" onclick="bbcode(\'[Lat-Rus]\',\'[/Rus-Lat]\');LatRus();"/>';
$("#button-font").after('<td id=button-transL>'+S+'</td>');var TxtTrans1='lat';
function LatRus(){if(TxtTrans1=='lat'){TxtTrans1='rus'}else{TxtTrans1='lat'};
lat0='qwertyuiopasdfghjkl;\'zxcvbnm\,QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>`~[].'.split('');
lat='qwertyuiopasdfghjkl;\'zxcvbnm\,QWERTYUIOP{}ASDFGHJKL:"ZXCVBNM<>`~'.split('');
lat.push('\\[');lat.push('\\]');lat.push('\\.');
rus=('йцукенгшщзфывапролджэячсмитьбЙЦУКЕНГШЩЗХЪФЫВАПРОЛДЖЭЯЧСМИТЬБЮёЁхъю').split('');
function transF(p){ar1=lat;ar2=rus;if(TxtTrans1=='lat'){ar2=lat0;ar1=rus}for(var i=0; i<ar1.length; i++){trans='/'+ar1[i]+'/g';p=p.replace(eval(trans), ar2[i])}return p;}L=$('#main-reply').val();L=L.replace(/\[Lat-Rus\]([\s\S]*)\[\/Rus-Lat\]/mg,function(a,b,c){return transF(b);});$('#main-reply').val(L);}
</script>

<!------------------------------------ СЧЕТЧИК СИМВОЛОВ В ФОРМЕ ОТВЕТА --------------------------------->
<script>var a,L,epl=$("#main-reply"),str='<small id="plng">написано <b>00</b> символов </small>';epl.parents("fieldset").find("legend").prepend(str);function epl3(){a=epl.val().length;if(a>9){L=''}else{L='0'};$("#plng b").text(L+a)};epl3();$(".pl-quote").click(function (){setTimeout('epl3()',100)});epl.bind('mouseout mousemove keydown keypress keyup',function(e){epl3()});</script>

<!=================================================================
                                                                     КОНЕЦ
==================================================================>

<!-------------------------------------- ОТКЛЮЧЕНИЕ ФУНКЦИЙ И КНОПОК ----------------------------------->

<!-- Отключение сокращения ссылок -->
<script type="text/javascript"> FORUM.set("editor.link.short_url", function() { return false; }); </script>

<!-- Скрыть "Пожаловаться" -->
<style type="text/css"> .pl-reports {display:none!important;} </style>

<!-- Скрыть "rss-atom" -->
<style type="text/css"> .punbb .modmenu .container span {display: none;} </style>

<!-- Ники модера -->
<style> .modlist {display: none !important;} </style>

<!-- Между никами запятая -->
<script>$('#topic-users-in a').prev('a').after(',');</script>

<!-- Запятая после ника в посте -->
<script type="text/javascript">
function to(username)
{insert('[b]' + username + '[/b]' + ', ');}
</script>

<!-- копирайт -->
<copy><a href="https://imagiart.ru/viewtopic.php?id=20005#p1378817">bad karma & luverance</a> </copy>

<!-- Регулировка размера шрифта в постах © Alex_63 -->
<style>
.FNTslider {
  border-radius: 4px;
  position:relative;z-index:1000;
  background: #E0E0E0;
  width: 110px;
  height: 5px;
  margin: 3px 5px;
  border: solid 1px #ccc;
  float: right;
  margin-right: 7%;
}
.FNTslider .before {
  height: 5px;
  border: solid 1px transparent;
  border-right: none 0;
  border-radius: 4px 0 0 4px;
  position: absolute;
  background: #A0BCDA;
  margin-top: -1px;
}
.FNTslider .thumb {
  width: 8px;
  height: 13px;
  border-radius: 3px;
  position: relative;
  top: -4px;
  background: #3980D8;
  cursor: pointer;
}
</style>
<script type="text/javascript" src="https://forumstatic.ru/files/0015/c4/3f/31001.js"></script>

<!-- Замена дефисов на тире © Deff -->
<script>$('.post-content p').html(function(){return this.innerHTML.replace(/(\s|&nbsp;)?-(\s|&nbsp;)/g,'$1&mdash;$2')})</script>



<!-- Маска от Человека-Шамана -->
<script src="https://forumstatic.ru/files/0017/95/29/89289.js"></script>
<script>
hvScriptSet.addMask({
    guestAccess: ['Архив'],
    forumAccessExtended: {
        'админка': ['Пользователи', 'тест'],
        'игра': ['Пользователи'],
        'настоящее': ['Пользователи'],
        'прошлое': ['Пользователи'],
        'альтернатива': ['Пользователи'],
        'Архив': ['Пользователи'],
        'флуд': ['Пользователи']
    }
});
</script>

<!------------------------------------- ЗАМЕНА ИКОНОК (с) ForumD.ru, Герда --------------------------------->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
#form-buttons tr {display: block;
    background: #e2e1e1;
    border: 1px solid #d7d7d7;
    margin: 5px 0px !important;
    margin-left: 15px !important;
    text-align: center;}


#form-buttons td img {position: absolute; z-index: 10; left: 0; top: 0;}

#form-buttons td {
background-image: none !important;
    display: inline-block;
    position: relative;
    width: 26px;
    height: 26px;
    margin: 0 2px 5px;
}

#form-buttons td .material-icons {
position: absolute;
    z-index: 1;
    left: 0;
    font-size: 20px;
    padding: 6px 0px;
    opacity: 0.5;
    color: #954740;
}


#form-buttons td:hover {background-color: none;} 
#form-buttons td:hover .material-icons { opacity: 1; } 
</style>
<script type="text/javascript">
$(document).ready(function(){

$("#button-font").append('<i class="material-icons">font_download</i>');
$("#button-size").append('<i class="material-icons">format_size</i>');
$("#button-bold").append('<i class="material-icons">format_bold</i>');
$("#button-italic").append('<i class="material-icons">format_italic</i>');
$("#button-underline").append('<i class="material-icons">format_underlined</i>');
$("#button-strike").append('<i class="material-icons">strikethrough_s</i>');
$("#button-left").append('<i class="material-icons">format_align_left</i>');
$("#button-center").append('<i class="material-icons">format_align_center</i>');
$("#button-right").append('<i class="material-icons">format_align_right</i>');
$("#button-link").append('<i class="material-icons">link</i>');
$("#button-spoiler").append('<i class="material-icons">present_to_all</i>');
$("#button-image").append('<i class="material-icons">add_photo_alternate</i>');
$("#button-image2").append('<i class="material-icons">collections</i>');
$("#button-video").append('<i class="material-icons">ondemand_video</i>');
$("#button-hide").append('<i class="material-icons">lock_open</i>');
$("#button-quote").append('<i class="material-icons">format_quote</i>');
$("#button-code").append('<i class="material-icons">code</i>');
$("#button-color").append('<i class="material-icons">color_lens</i>');
$("#button-table").append('<i class="material-icons">table_view</i>');
$("#button-smile").append('<i class="material-icons">mood</i>');
$("#button-keyboard").append('<i class="material-icons">keyboard</i>');
$("#button-addition").append('<i class="material-icons">add_circle</i>');
$("#button-transL").append('<i class="material-icons">autorenew</i>');
$("#button-graffiti_rusff").append('<i class="material-icons">brush</i>');
$("#button-ChangeСase").append('<i class="material-icons">text_rotation_none</i>');
$("#button-indent").append('<i class="material-icons">format_indent_increase</i>');
$("#button-dice").append('<i class="material-icons">casino</i>');
setTimeout(() => $("#button-html").append('<i class="material-icons">html_rounded</i>'), 400);
setTimeout(() => $("#button-html").append('<i class="material-icons">html_rounded</i>'), 400);
setTimeout(() => $("#button-justify").append('<i class="material-icons">format_align_justify</i>'), 400);
setTimeout(() => $("#button-sticker").append('<i class="material-icons">emoji_emotions</i>'), 400);
setTimeout(() => $("#button-mask").append('<i class="material-icons">person</i>'), 400);
setTimeout(() => $("#floatbut").append('<i class="material-icons">waves</i>'), 400);


});
</script>

<!----- Дополнительные смайлы by Человек-Шаман ----->
<script src="https://forumstatic.ru/files/0017/95/29/40399.js"></script>
<script>
$(document).ready(function() {
  hvStickerPack.init("https://forumstatic.ru/files/001c/5a/2f/14428.txt?v=1");
});
</script>